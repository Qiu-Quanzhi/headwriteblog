import{l as x}from"./xml-js-DLVM9Ca8.js";import{c as k}from"./@babel-BgIvLCQ5.js";var m={},_={},c={};Object.defineProperty(c,"__esModule",{value:!0});c.generator=void 0;c.generator="https://github.com/jpmonette/feed";var d={};Object.defineProperty(d,"__esModule",{value:!0});d.sanitize=void 0;function y(a){if(!(typeof a>"u"))return a.replace(/&/g,"&amp;")}d.sanitize=y;Object.defineProperty(_,"__esModule",{value:!0});var j=x,z=c,f=d;_.default=function(a){var t=a.options,r={_declaration:{_attributes:{version:"1.0",encoding:"utf-8"}},feed:{_attributes:{xmlns:"http://www.w3.org/2005/Atom"},id:t.id,title:t.title,updated:t.updated?t.updated.toISOString():new Date().toISOString(),generator:f.sanitize(t.generator||z.generator)}};t.author&&(r.feed.author=p(t.author)),r.feed.link=[],t.link&&r.feed.link.push({_attributes:{rel:"alternate",href:f.sanitize(t.link)}});var s=f.sanitize(t.feed||t.feedLinks&&t.feedLinks.atom);return s&&r.feed.link.push({_attributes:{rel:"self",href:f.sanitize(s)}}),t.hub&&r.feed.link.push({_attributes:{rel:"hub",href:f.sanitize(t.hub)}}),t.description&&(r.feed.subtitle=t.description),t.image&&(r.feed.logo=t.image),t.favicon&&(r.feed.icon=t.favicon),t.copyright&&(r.feed.rights=t.copyright),r.feed.category=[],a.categories.map(function(e){r.feed.category.push({_attributes:{term:e}})}),r.feed.contributor=[],a.contributors.map(function(e){r.feed.contributor.push(p(e))}),r.feed.entry=[],a.items.map(function(e){var n={title:{_attributes:{type:"html"},_cdata:e.title},id:f.sanitize(e.id||e.link),link:[{_attributes:{href:f.sanitize(e.link)}}],updated:e.date.toISOString()};e.description&&(n.summary={_attributes:{type:"html"},_cdata:e.description}),e.content&&(n.content={_attributes:{type:"html"},_cdata:e.content}),Array.isArray(e.author)&&(n.author=[],e.author.map(function(i){n.author.push(p(i))})),Array.isArray(e.category)&&(n.category=[],e.category.map(function(i){n.category.push(A(i))})),e.contributor&&Array.isArray(e.contributor)&&(n.contributor=[],e.contributor.map(function(i){n.contributor.push(p(i))})),e.published&&(n.published=e.published.toISOString()),e.copyright&&(n.rights=e.copyright),r.feed.entry.push(n)}),j.js2xml(r,{compact:!0,ignoreComment:!0,spaces:4})};var p=function(a){var t=a.name,r=a.email,s=a.link,e={name:t};return r&&(e.email=r),s&&(e.uri=f.sanitize(s)),e},A=function(a){var t=a.name,r=a.scheme,s=a.term;return{_attributes:{label:t,scheme:r,term:s}}},v={};Object.defineProperty(v,"__esModule",{value:!0});v.default=function(a){var t=a.options,r=a.items,s=a.extensions,e={version:"https://jsonfeed.org/version/1",title:t.title};return t.link&&(e.home_page_url=t.link),t.feedLinks&&t.feedLinks.json&&(e.feed_url=t.feedLinks.json),t.description&&(e.description=t.description),t.image&&(e.icon=t.image),t.author&&(e.author={},t.author.name&&(e.author.name=t.author.name),t.author.link&&(e.author.url=t.author.link)),s.map(function(n){e[n.name]=n.objects}),e.items=r.map(function(n){var i={id:n.id,content_html:n.content};if(n.link&&(i.url=n.link),n.title&&(i.title=n.title),n.description&&(i.summary=n.description),n.image&&(i.image=n.image),n.date&&(i.date_modified=n.date.toISOString()),n.published&&(i.date_published=n.published.toISOString()),n.author){var o=n.author;o instanceof Array&&(o=o[0]),i.author={},o.name&&(i.author.name=o.name),o.link&&(i.author.url=o.link)}return Array.isArray(n.category)&&(i.tags=[],n.category.map(function(u){u.name&&i.tags.push(u.name)})),n.extensions&&n.extensions.map(function(u){i[u.name]=u.objects}),i}),JSON.stringify(e,null,4)};var b={},g=k&&k.__assign||function(){return g=Object.assign||function(a){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])}return a},g.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0});var S=x,O=c,l=d;b.default=function(a){var t=a.options,r=!1,s=!1,e={_declaration:{_attributes:{version:"1.0",encoding:"utf-8"}},rss:{_attributes:{version:"2.0"},channel:{title:{_text:t.title},link:{_text:l.sanitize(t.link)},description:{_text:t.description},lastBuildDate:{_text:t.updated?t.updated.toUTCString():new Date().toUTCString()},docs:{_text:t.docs?t.docs:"https://validator.w3.org/feed/docs/rss2.html"},generator:{_text:t.generator||O.generator}}}};t.language&&(e.rss.channel.language={_text:t.language}),t.ttl&&(e.rss.channel.ttl={_text:t.ttl}),t.image&&(e.rss.channel.image={title:{_text:t.title},url:{_text:t.image},link:{_text:l.sanitize(t.link)}}),t.copyright&&(e.rss.channel.copyright={_text:t.copyright}),a.categories.map(function(i){e.rss.channel.category||(e.rss.channel.category=[]),e.rss.channel.category.push({_text:i})});var n=t.feed||t.feedLinks&&t.feedLinks.rss;return n&&(r=!0,e.rss.channel["atom:link"]=[{_attributes:{href:l.sanitize(n),rel:"self",type:"application/rss+xml"}}]),t.hub&&(r=!0,e.rss.channel["atom:link"]||(e.rss.channel["atom:link"]=[]),e.rss.channel["atom:link"]={_attributes:{href:l.sanitize(t.hub),rel:"hub"}}),e.rss.channel.item=[],a.items.map(function(i){var o={};i.title&&(o.title={_cdata:i.title}),i.link&&(o.link={_text:l.sanitize(i.link)}),i.guid?o.guid={_text:i.guid}:i.id?o.guid={_text:i.id}:i.link&&(o.guid={_text:l.sanitize(i.link)}),i.date&&(o.pubDate={_text:i.date.toUTCString()}),i.published&&(o.pubDate={_text:i.published.toUTCString()}),i.description&&(o.description={_cdata:i.description}),i.content&&(s=!0,o["content:encoded"]={_cdata:i.content}),Array.isArray(i.author)&&(o.author=[],i.author.map(function(u){u.email&&u.name&&o.author.push({_text:u.email+" ("+u.name+")"})})),Array.isArray(i.category)&&(o.category=[],i.category.map(function(u){o.category.push(w(u))})),i.enclosure&&(o.enclosure=h(i.enclosure)),i.image&&(o.enclosure=h(i.image,"image")),i.audio&&(o.enclosure=h(i.audio,"audio")),i.video&&(o.enclosure=h(i.video,"video")),e.rss.channel.item.push(o)}),s&&(e.rss._attributes["xmlns:dc"]="http://purl.org/dc/elements/1.1/",e.rss._attributes["xmlns:content"]="http://purl.org/rss/1.0/modules/content/"),r&&(e.rss._attributes["xmlns:atom"]="http://www.w3.org/2005/Atom"),S.js2xml(e,{compact:!0,ignoreComment:!0,spaces:4})};var h=function(a,t){if(t===void 0&&(t="image"),typeof a=="string"){var r=new URL(a).pathname.split(".").slice(-1)[0];return{_attributes:{url:a,length:0,type:t+"/"+r}}}var s=new URL(a.url).pathname.split(".").slice(-1)[0];return{_attributes:g({length:0,type:t+"/"+s},a)}},w=function(a){var t=a.name,r=a.domain;return{_text:t,_attributes:{domain:r}}};Object.defineProperty(m,"__esModule",{value:!0});var L=m.Feed=void 0,C=_,I=v,P=b,F=function(){function a(t){var r=this;this.items=[],this.categories=[],this.contributors=[],this.extensions=[],this.addItem=function(s){return r.items.push(s)},this.addCategory=function(s){return r.categories.push(s)},this.addContributor=function(s){return r.contributors.push(s)},this.addExtension=function(s){return r.extensions.push(s)},this.atom1=function(){return C.default(r)},this.rss2=function(){return P.default(r)},this.json1=function(){return I.default(r)},this.options=t}return a}();L=m.Feed=F;export{L as F};
