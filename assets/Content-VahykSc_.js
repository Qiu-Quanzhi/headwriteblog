import{a as I}from"./vue-router-p3suwGEc.js";import{u as b}from"./vuex-DWRQm9L4.js";import{_ as N}from"./index-I0FfvhzW.js";import{aS as u,aC as k,as as y,bC as T,u as d,F as B,aV as D,t as F,v as m,b9 as f,s as z,aX as E,aK as i,av as L}from"./@vue-Cn0pJ44W.js";import"./@kangc-BwDk5HIv.js";import"./@babel-BgIvLCQ5.js";import"./vue-tkVpdOni.js";import"./@vuepress-3yONQRlZ.js";import"./copy-to-clipboard-C0dvYkVd.js";import"./toggle-selection-DGa8lynz.js";import"./highlight.js-DsdEMM-1.js";const O={setup(){const l=I(),v=b(),s=u({title:l.params.title||"无标题",date:l.params.date||"未知日期",content:""}),t=u([]),p=u(null),_=u(!0),h=()=>{_.value=window.innerWidth>=1024};window.addEventListener("resize",h),k(h);const r=e=>{const n=sessionStorage.getItem(`article-${e}`);return n?JSON.parse(n):null},g=()=>{console.log("复制成功")},w=async e=>{const n=r(e);if(n)s.value=n;else{const a=v.state.markdownFiles.find(o=>o.title===e);a?(s.value={title:a.title,date:s.value.date,content:a.content},sessionStorage.setItem(`article-${e}`,JSON.stringify(s.value))):s.value.content="文章未找到"}},x=(e,n)=>{const a=e.map(o=>({src:o,type:"image"}));$.fancybox.open(a,{index:n,buttons:["zoom","close"],loop:!0})},S=e=>{const n=p.value,{lineIndex:a}=e,o=n.$el.querySelector(`[data-v-md-line="${a}"]`);o&&n.scrollToTarget({target:o,scrollContainer:window,top:60})},C=()=>{const e=p.value;if(!e)return;const n=e.$el;if(!n)return;const a=n.querySelectorAll("h1, h2, h3, h4, h5, h6"),o=Array.from(a).filter(c=>c.innerText.trim());if(!o.length)return;const A=Array.from(new Set(o.map(c=>c.tagName))).sort();t.value=o.map(c=>({title:c.innerText,lineIndex:c.getAttribute("data-v-md-line"),indent:A.indexOf(c.tagName)}))};return k(()=>{l.params.title&&w(l.params.title).then(()=>{y(()=>{C()})})}),T(()=>s.value.content,e=>{e&&y(()=>{C()})}),{article:s,titles:t,handleCopyCodeSuccess:g,handleAnchorClick:S,handleImageClick:x,previewRef:p,isDesktop:_}}},R={class:"content-wrapper"},V={key:0,class:"anchor-navigation"},q=["onClick"],J={style:{cursor:"pointer"}},K={class:"content-container"},M={class:"content-header"},W={class:"article-title"},X={class:"article-date"},j={key:1};function G(l,v,s,t,p,_){const h=E("v-md-preview");return i(),d("div",R,[t.isDesktop?(i(),d("nav",V,[(i(!0),d(B,null,D(t.titles,r=>(i(),d("div",{key:r.lineIndex,style:L({paddingLeft:`${r.indent*20}px`}),class:"anchor-item",onClick:g=>t.handleAnchorClick(r)},[m("a",J,f(r.title),1)],12,q))),128))])):F("",!0),m("div",K,[m("header",M,[m("h1",W,f(t.article.title),1),m("p",X,"发布日期："+f(t.article.date),1)]),t.article.content?(i(),z(h,{onImageClick:t.handleImageClick,ref:"previewRef",onCopyCodeSuccess:t.handleCopyCodeSuccess,text:t.article.content,key:t.article.title},null,8,["onImageClick","onCopyCodeSuccess","text"])):(i(),d("p",j,"加载中..."))])])}const se=N(O,[["render",G],["__scopeId","data-v-5d8b5f2b"]]);export{se as default};
