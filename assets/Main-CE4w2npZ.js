import{aQ as k,aK as r,u as c,v as e,b9 as m,t as _,aS as h,bC as w,aC as S,I as C,s as F,bH as L,h as b,F as $,aV as x,av as D}from"./@vue-Cn0pJ44W.js";import{u as M}from"./vuex-DWRQm9L4.js";import{u as N}from"./vue-router-p3suwGEc.js";import{_ as v}from"./index-cYLuHPxB.js";import"./@kangc-BwDk5HIv.js";import"./@babel-BgIvLCQ5.js";import"./vue-tkVpdOni.js";import"./@vuepress-3yONQRlZ.js";import"./copy-to-clipboard-C0dvYkVd.js";import"./toggle-selection-DGa8lynz.js";import"./highlight.js-DsdEMM-1.js";const i=k({isLoading:!1,show(u="加载中..."){this.isLoading=!0,this.message=u},hide(){this.isLoading=!1,this.message=""},message:""}),A={setup(){return{loadingState:i}}},B={key:0,class:"loading-overlay"},I={class:"loading-content"};function V(u,o,l,t,n,p){return t.loadingState.isLoading?(r(),c("div",B,[e("div",I,[o[0]||(o[0]=e("div",{class:"spinner"},null,-1)),e("p",null,m(t.loadingState.message),1)])])):_("",!0)}const R=v(A,[["render",V]]),G={class:"blog-container"},J=["onClick"],O={__name:"Main",setup(u){const o=M(),l=N(),t=h([]),n=h(!1),p=()=>{const a=sessionStorage.getItem("markdownFiles");return a?JSON.parse(a):null},g=async()=>{o.state.markdownFiles.length===0&&await o.dispatch("loadMarkdownFiles");const a=p();a?t.value=a:(t.value=o.state.markdownFiles.map(s=>({name:s.name,date:s.created,title:s.title,daysAgo:s.daysAgo})),sessionStorage.setItem("markdownFiles",JSON.stringify(t.value)))},y=a=>{l.push({name:"Content",params:{title:a.title,date:a.date}})};return w(()=>l.currentRoute.value,async()=>{i.show("正在加载页面..."),n.value=!1;try{l.currentRoute.value.name==="Main"&&await g()}finally{i.hide(),n.value=!0}}),S(async()=>{i.show("正在加载页面...");try{await g()}catch{console.error("加载失败")}finally{i.hide(),n.value=!0}}),(a,s)=>(r(),c("div",G,[s[0]||(s[0]=e("header",{class:"blog-header"},[e("h1",null,"江湖夜雨十年灯"),e("p",null,"一壶浊酒尽余欢，今宵别梦寒。")],-1)),C(R),n.value?(r(),F(b,{key:0,name:"fade",tag:"ul",class:"blog-list"},{default:L(()=>[(r(!0),c($,null,x(t.value,(d,f)=>(r(),c("li",{key:d.name,onClick:T=>y(d),style:D({animationDelay:`${f*.1}s`})},[e("h2",null,m(d.title),1),e("p",null,m(d.daysAgo)+" 天前",1)],12,J))),128))]),_:1})):_("",!0)]))}},Y=v(O,[["__scopeId","data-v-9dd7c7f5"]]);export{Y as default};
